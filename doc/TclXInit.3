.\"
.\" TclXInit.3
.\"
.\" Extended Tcl initialization functions.
.\"----------------------------------------------------------------------------
.\" Copyright 1992-1995 Karl Lehenbauer and Mark Diekhans.
.\"
.\" Permission to use, copy, modify, and distribute this software and its
.\" documentation for any purpose and without fee is hereby granted, provided
.\" that the above copyright notice appear in all copies.  Karl Lehenbauer and
.\" Mark Diekhans make no representations about the suitability of this
.\" software for any purpose.  It is provided "as is" without express or
.\" implied warranty.
.\"----------------------------------------------------------------------------
.\" $Id: TclXInit.3,v 4.5 1995/07/05 01:17:36 markd Exp markd $
.\"----------------------------------------------------------------------------
.\"
.TH "TclXInit" TCL "" "Tcl"
.ad b
.SH NAME
TclX_Init, TclXCmd_Init, TclXLib_Init, TclX_Main - Extended Tcl initialization.
'
.SH SYNOPSIS
.nf
.ft CW
-ltclx -ltcl

#include "tclExtend.h"

extern char *tclAppName;
extern char *tclAppLongname;
extern char *tclAppVersion;
extern int   tclAppPatchlevel;

int
Tcl_AppInit (Tcl_Interp *interp);

int
TclX_Init (Tcl_Interp *interp);

int
TclXCmd_Init (Tcl_Interp *interp);

int
TclXLib_Init (Tcl_Interp *interp);

void
TclX_Main (int               argc,
           char            **argv,
           Tcl_AppInitProc  *appInitProc);

int
TkX_Init (Tcl_Interp *interp);

void
TkX_Main (int               argc,
          char            **argv,
          Tcl_AppInitProc  *appInitProc);

.ft R
.fi
.SH DESCRIPTION
These functions are used to initialize Extended Tcl and applications based
on Extended Tcl.  This manual page also discusses various issues and approaches
of integrating TclX into other applications.
'
.SS tclAppName
The application name to be returned by the \fBinfox\fR
command. This should be a short mnemonic.  This value maybe altered from
the default by the application.
'
.SS tclAppLongname
The application long name to be returned by the \fBinfox\fR command.
This should be a natural language string.  This value maybe altered from
the default by the application.
'
.SS tclAppVersion
The application version string to be returned by the \fBinfox\fR command.
procedures are called.  This value maybe altered from
the default by the application.
'
.SS tclAppPatchlevel
The application patchlevel to be returned by the \fBinfox\fR command.
procedures are called.  This value maybe altered from
the default by the application.
'
.SS tclX_library
The path to the TclX runtime library.
This directory contains the initialization file evaluated by TclX_Init and is
also appended to auto_path.
This variable is initialized to the compile-time specified install location.
The value maybe modified before TclX_Init or TclXLib_Init are called to
use another library in a particular application.
If its set to NULL, no library will be used unless override by tclX_libraryEnv.
Setting tclX_libraryEnv and this variable to NULL causes no library directory
or initialization file to be used.
'
.SS tclX_libraryEnv
Environment variable used to override the path stored in tclX_library.
The value maybe modified before TclX_Init or TclXLib_Init are called to
use another environment variable for a particular application.
If its set to NULL, no environment variable will allow to override.
Defaults to "TCL_LIBRARY".
'
.SS tclX_initFile
The initialization file for TclX_Init to source.
By default the file "TclInit.tcl" in the TclX library directory is sourced.
If set to an absolute path, it is not assumed to be in the TclX library
directory and is independent of a library path being specified.
If set to NULL, not initialization file is evaluated.
'
.SS Tcl_AppInit
.PP
This function is used to initialize an TclX based application.
It is intended to
the the only file that is modified for most applications.
There are two versions of this function, one for applications built on
just TclX and the other for applications built on TclX and Tk.
.PP
The TclX version of this function is found in \fBtclXAppInit.c\fR and the 
Tk version is found in \fBtkXAppInit.c\fR.  It should be modified according to
the instructions in these files to initialize a TclX based application.
.PP
A custom application is then linked in a manner similar to:
.sp
.nf
.ft CW
  cc tclXAppInit.o mystuff.a libtclx.a libtcl.a ${SYSLIBS} -o myapp
.ft R
.fi
.sp
or
.sp
.nf
.ft CW
  cc tkXAppInit.o mystuff.a libtkx.a libtk.a libtclx.a libtcl.a \\
     ${SYSLIBS} -o myapp
.ft R
.fi
'
.SS TclX_Init
.PP
Initializes Extended Tcl, adding the extended command set to the interpreter.
This is called from \fBTcl_AppInit\fR.  Normally, this function is used in
an application in place of the \fBTcl_Init\fR function.  If used in this
way, the UCB Tcl run time environment is not required and startup will be
faster.  This function may also be called after \fBTcl_Init\fR has been called.
In this case, the Tcl library mechanism defined in \fBinit.tcl\fR will be
replaced with the TclX mechanism.
.PP
Parameters
.RS 2
\fBo \fIinterp\fR - A pointer to the interpreter to add the commands to.
.RE
.PP
Returns:
.RS 2
\fBTCL_OK\fR if all is ok, \fBTCL_ERROR\fR if an error occurred.
.RE
'
.SS TclXCmd_Init
.PP
Add the TclX command set to the interpreter, with the exception of the
TclX library management commands.  This is normally called by
\fBTclX_Init\fR and should only be used if you don't want the TclX library
handling.
.PP
Parameters
.RS 2
\fBo \fIinterp\fR - A pointer to the interpreter to add the commands to.
.RE
.PP
Returns:
.RS 2
\fBTCL_OK\fR if all is ok, \fBTCL_ERROR\fR if an error occurred.
.RE
'
.SS TclXLib_Init
.PP
Add the TclX library management commands to the interpreter.
This is normally called by \fBTclX_Init\fR.  It also sets the Tcl variable
"tclx_library" to TclX library directory.
.PP
Parameters
.RS 2
\fBo \fIinterp\fR - A pointer to the interpreter to add the commands to.
.RE
.PP
Returns:
.RS 2
\fBTCL_OK\fR if all is ok, \fBTCL_ERROR\fR if an error occurred.
.RE
'
.SS TclX_Main
.PP
This function parses the command line according to the TclX shell
specification (Unix shell compatible).
It creates an interpreter and calls the specified function \fBappInitProc\fR
to initialize any application specific commands.
It then either evaluates the command of script specified on the command line
or enters an interactive command loop.
This procedure never returns, it exits the process when it's done.  Using
the TclX shell also gives you SIGINT handling in interactive shells.
'
.SS TkX_Init
.PP
Initializes Extended Tcl Tk environment.
This is called from \fBTcl_AppInit\fR.  Normally, this function is used in
an application in place of the \fBTk_Init\fR function.  If used in this
way, the UCB Tk run time environment is not required and startup will be
faster.  This function may also be called after \fBTk_Init\fR has been called.
In this case, the TclX Tk runtime environment will not be user or required.
.PP
Parameters
.RS 2
\fBo \fIinterp\fR - A pointer to the interpreter to add the commands to.
.RE
.PP
Returns:
.RS 2
\fBTCL_OK\fR if all is ok, \fBTCL_ERROR\fR if an error occurred.
.RE
'
.SS TclX_Main
.PP
This function parses the command line according to the wish shell
specification.
It creates an interpreter and calls the specified function \fBappInitProc\fR
to initialize any application specific commands.
It then either evaluates the command of script specified on the command line
or enters an interactive command loop.
This procedure never returns, it exits the process when it's done.  Using
the TclX wish shell gives you SIGINT handling in interactive shells,
otherwise it is identical to standard wish.
'
.SH "INTEGRATING TCLX WITH OTHER EXTENSIONS AND APPLICATIONS"
.PP
There are two aspects to integrating TclX with other applications. Does
the application use the Tcl/Tk standard runtime or rely only on the 
TclX runtime and are the Tcl and Tk shells based on the standard Tcl/Tk shells
or the TclX shells.  The tclAppInit.c is the only file that will normally
need to be modified.
.PP
The normal approach to add TclX to an application is to replace the
calls to \fBTcl_Init\fR with \fBTclX_Init\fR and  \fBTk_Init\fR with
\fBTkX_Init\fR.  TclX has a functional superset of the Tcl and Tk
runtimes.  The TclX, used alone, does not require the standard
runtime environments to be installed on the system.  It supports faster
auto loading of the runtime routines and has support for multiple
version of TclX being installed (use master directory install option
for most flexability).  However, some people are more comfortable
adding Tcl in the same way as other extensions.  That is, calling
\fBTclX_Init\fR after \fBTcl_Init\fR and \fBTkX_Init\fR after \fBTk_Init\fR.
Currently, calling \fBTkX_Init\fR is uncessary if the \fBTk_Init\fR has
been called.
.PP
If only the TclX command set, but not the procedure library and runtime
is desired, then \fBTclXCmd_Init\fR is called after \fBTcl_Init\fR.
.PP
To get the TclX shell in a Tcl only application, with the \fBtcl\fR command
functionallity, call \fBTclX_Main\fR from the \fBmain\fR function instead of
\fBTcl_Main\fR.
This shell has arguments conforming to other Unix shells and SIGINT signal
handling when interactive,.
.PP
To get the Tclx shell in a Tk application, with the \fBwishx\fR command
functionallity, call \fBTkX_Main\fR from the \fBmain\fR function instead of
\fBTk_Main\fR.
This shell has SIGINT signal handling when interactive,
